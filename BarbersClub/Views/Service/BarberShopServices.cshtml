@{
    ViewData["Title"] = $"Agendamentos de {ViewBag.BarberShopName}";
}

@section Styles {
    <link rel="stylesheet" href="~/css/Service/BarberShopsServices.css" asp-append-version="true" />
}

<div class="container my-5">
    <header class="mb-4">
        <h1 class="h2 fw-bold">Agendamentos</h1>
        <p class="text-muted">Gerencie os agendamentos de "@ViewBag.BarberShopName"</p>
    </header>

    <div class="filters-panel card mb-4">
        <div class="card-body">
            <h5 class="card-title mb-3">Filtros</h5>
            <div class="row g-3">
                <div class="col-md-6">
                    <label for="clientNameFilter" class="form-label">Nome do Cliente</label>
                    <input type="text" class="form-control" id="clientNameFilter" placeholder="João da Silva">
                </div>

                <div class="col-md-6">
                    <label for="serviceTypeFilter" class="form-label">Tipo de Serviço</label>
                    <select id="serviceTypeFilter" class="form-select" asp-items="ViewBag.ServiceTypeOptions"></select>
                </div>
                <div class="col-md-4">
                    <label for="startDateFilter" class="form-label">Data Início</label>
                    <input type="date" class="form-control" id="startDateFilter">
                </div>
                <div class="col-md-4">
                    <label for="endDateFilter" class="form-label">Data Fim</label>
                    <input type="date" class="form-control" id="endDateFilter">
                </div>
                <div class="col-md-4">
                    <label for="timeFilter" class="form-label">Horário Específico</label>
                    <select class="form-select" id="timeFilter">
                        <option value="">Todos os Horários</option>
                        @{
                            int startHour = ViewBag.OpeningTime.Hours;
                            int endHour = ViewBag.ClosingTime.Hours;

                            for (int hour = startHour; hour <= endHour; hour++)
                            {
                                <option value="@hour.ToString("00"):00">@(hour.ToString("00")):00</option>
                            }
                        }
                    </select>
                </div>
            </div>
            <div class="mt-3">
                <button class="btn btn-primary" type="button" id="filterButton"><i class="bi bi-search"></i> Filtrar</button>
                <button class="btn btn-secondary" type="button" id="clearFiltersButton"><i class="bi bi-x-lg"></i> Limpar Filtros</button>
            </div>
        </div>
    </div>
    <div id="appointment-list-container">
        <div class="text-center p-5" id="loading-spinner">
            <div class="spinner-border text-light" style="width: 3rem; height: 3rem;" role="status">
                <span class="visually-hidden">Carregando...</span>
            </div>
            <p class="mt-3 text-muted">Buscando agendamentos...</p>
        </div>
    </div>
</div>

<input type="file" id="photoUploader" style="display: none;" accept="image/*" />


@section Scripts {
    <script>
        const BARBERSHOP_ID = @Html.Raw(Json.Serialize(ViewBag.BarberShopId));
    </script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="~/js/Service/BarberShopServices.js" asp-append-> </script>
}